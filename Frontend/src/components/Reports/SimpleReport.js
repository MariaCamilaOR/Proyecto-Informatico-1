import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from "react";
import { Box, VStack, HStack, Text, Card, CardBody, Badge, Progress, Grid, GridItem, Button, Select, Stat, StatLabel, StatNumber, StatHelpText, StatArrow, } from "@chakra-ui/react";
import { FaChartLine, FaCalendarAlt, FaUser, FaBrain, FaEye } from "react-icons/fa";
export function SimpleReport({ reportData, onExportPDF, onShareWithDoctor, canExport = false, canShare = false, }) {
    const [selectedPeriod, setSelectedPeriod] = useState("30d");
    const getTrendColor = (trend) => trend === "up" ? "green" : trend === "down" ? "red" : "blue";
    const getTrendIcon = (trend) => trend === "up" ? _jsx(StatArrow, { type: "increase" }) :
        trend === "down" ? _jsx(StatArrow, { type: "decrease" }) :
            _jsx(StatArrow, { type: "increase" });
    const getScoreColor = (score) => (score >= 80 ? "green" : score >= 60 ? "yellow" : "red");
    const getScoreLabel = (score) => score >= 80 ? "Excelente" : score >= 60 ? "Bueno" : score >= 40 ? "Regular" : "Necesita atención";
    // Demo si no llega data
    const demoData = {
        patientId: "demo-patient-123",
        patientName: "María González",
        period: "Últimos 30 días",
        baselineScore: 75,
        currentScore: 82,
        trend: "up",
        sessionsCompleted: 8,
        photosDescribed: 12,
        averageRecall: 78,
        averageCoherence: 85,
        lastSession: "2024-01-20",
        recommendations: [
            "Continuar con las sesiones regulares",
            "Mantener la rutina de descripción de fotos",
            "Considerar aumentar la frecuencia a 3 veces por semana",
        ],
    };
    const data = reportData ?? demoData;
    return (_jsxs(VStack, { spacing: 6, w: "full", children: [_jsx(Card, { w: "full", children: _jsx(CardBody, { children: _jsx(VStack, { spacing: 4, children: _jsxs(HStack, { justify: "space-between", w: "full", children: [_jsxs(VStack, { align: "start", spacing: 1, children: [_jsx(Text, { fontSize: "2xl", fontWeight: "bold", color: "whiteAlpha.900", children: "\uD83D\uDCCA Reporte de Progreso" }), _jsxs(Text, { color: "gray.400", children: [data.patientName, " \u2022 ", data.period] })] }), _jsxs(VStack, { spacing: 2, children: [_jsxs(Select, { value: selectedPeriod, onChange: (e) => setSelectedPeriod(e.target.value), size: "sm", children: [_jsx("option", { value: "7d", children: "\u00DAltimos 7 d\u00EDas" }), _jsx("option", { value: "30d", children: "\u00DAltimos 30 d\u00EDas" }), _jsx("option", { value: "90d", children: "\u00DAltimos 90 d\u00EDas" })] }), _jsxs(HStack, { spacing: 2, children: [canExport && (_jsx(Button, { size: "sm", colorScheme: "blue", variant: "outline", onClick: onExportPDF, children: "\uD83D\uDCC4 Exportar PDF" })), canShare && (_jsx(Button, { size: "sm", colorScheme: "green", variant: "outline", onClick: onShareWithDoctor, children: "\uD83D\uDC69\u200D\u2695\uFE0F Compartir con m\u00E9dico" }))] })] })] }) }) }) }), _jsxs(Grid, { templateColumns: "repeat(auto-fit, minmax(200px, 1fr))", gap: 4, w: "full", children: [_jsx(GridItem, { children: _jsx(Card, { children: _jsx(CardBody, { children: _jsxs(Stat, { children: [_jsx(StatLabel, { children: "Puntuaci\u00F3n Actual" }), _jsxs(StatNumber, { color: `${getScoreColor(data.currentScore)}.500`, children: [data.currentScore, "%"] }), _jsxs(StatHelpText, { children: [getTrendIcon(data.trend), data.trend === "up" ? "Mejorando" : data.trend === "down" ? "Disminuyendo" : "Estable"] })] }) }) }) }), _jsx(GridItem, { children: _jsx(Card, { children: _jsx(CardBody, { children: _jsxs(Stat, { children: [_jsx(StatLabel, { children: "Sesiones Completadas" }), _jsx(StatNumber, { color: "blue.500", children: data.sessionsCompleted }), _jsxs(StatHelpText, { children: [_jsx(FaCalendarAlt, {}), " ", data.period] })] }) }) }) }), _jsx(GridItem, { children: _jsx(Card, { children: _jsx(CardBody, { children: _jsxs(Stat, { children: [_jsx(StatLabel, { children: "Fotos Descritas" }), _jsx(StatNumber, { color: "purple.500", children: data.photosDescribed }), _jsxs(StatHelpText, { children: [_jsx(FaEye, {}), " Total acumulado"] })] }) }) }) }), _jsx(GridItem, { children: _jsx(Card, { children: _jsx(CardBody, { children: _jsxs(Stat, { children: [_jsx(StatLabel, { children: "L\u00EDnea Base" }), _jsxs(StatNumber, { color: "gray.500", children: [data.baselineScore, "%"] }), _jsx(StatHelpText, { children: "Puntuaci\u00F3n inicial" })] }) }) }) })] }), _jsxs(Grid, { templateColumns: "repeat(2, 1fr)", gap: 6, w: "full", children: [_jsx(GridItem, { children: _jsx(Card, { children: _jsx(CardBody, { children: _jsxs(VStack, { spacing: 4, children: [_jsxs(HStack, { children: [_jsx(FaBrain, {}), _jsx(Text, { fontWeight: "bold", children: "Recall (Memoria)" })] }), _jsxs(VStack, { spacing: 2, w: "full", children: [_jsxs(HStack, { justify: "space-between", w: "full", children: [_jsx(Text, { fontSize: "sm", children: "Promedio actual" }), _jsxs(Badge, { colorScheme: getScoreColor(data.averageRecall), children: [data.averageRecall, "%"] })] }), _jsx(Progress, { value: data.averageRecall, w: "full", colorScheme: getScoreColor(data.averageRecall), size: "lg" }), _jsx(Text, { fontSize: "xs", color: "gray.500", children: getScoreLabel(data.averageRecall) })] })] }) }) }) }), _jsx(GridItem, { children: _jsx(Card, { children: _jsx(CardBody, { children: _jsxs(VStack, { spacing: 4, children: [_jsxs(HStack, { children: [_jsx(FaChartLine, {}), _jsx(Text, { fontWeight: "bold", children: "Coherencia" })] }), _jsxs(VStack, { spacing: 2, w: "full", children: [_jsxs(HStack, { justify: "space-between", w: "full", children: [_jsx(Text, { fontSize: "sm", children: "Promedio actual" }), _jsxs(Badge, { colorScheme: getScoreColor(data.averageCoherence), children: [data.averageCoherence, "%"] })] }), _jsx(Progress, { value: data.averageCoherence, w: "full", colorScheme: getScoreColor(data.averageCoherence), size: "lg" }), _jsx(Text, { fontSize: "xs", color: "gray.500", children: getScoreLabel(data.averageCoherence) })] })] }) }) }) })] }), _jsx(Card, { w: "full", children: _jsx(CardBody, { children: _jsxs(VStack, { spacing: 4, children: [_jsx(Text, { fontWeight: "bold", fontSize: "lg", children: "\uD83D\uDCC8 Comparaci\u00F3n con L\u00EDnea Base" }), _jsxs(Grid, { templateColumns: "repeat(3, 1fr)", gap: 4, w: "full", children: [_jsxs(Box, { textAlign: "center", children: [_jsx(Text, { fontSize: "sm", color: "gray.600", children: "L\u00EDnea Base" }), _jsxs(Text, { fontSize: "2xl", fontWeight: "bold", color: "gray.500", children: [data.baselineScore, "%"] })] }), _jsxs(Box, { textAlign: "center", children: [_jsx(Text, { fontSize: "sm", color: "gray.600", children: "Actual" }), _jsxs(Text, { fontSize: "2xl", fontWeight: "bold", color: `${getScoreColor(data.currentScore)}.500`, children: [data.currentScore, "%"] })] }), _jsxs(Box, { textAlign: "center", children: [_jsx(Text, { fontSize: "sm", color: "gray.600", children: "Diferencia" }), _jsxs(Text, { fontSize: "2xl", fontWeight: "bold", color: getTrendColor(data.trend), children: [data.trend === "up" ? "+" : data.trend === "down" ? "-" : "", Math.abs(data.currentScore - data.baselineScore), "%"] })] })] })] }) }) }), _jsx(Card, { w: "full", children: _jsx(CardBody, { children: _jsxs(VStack, { spacing: 4, align: "stretch", children: [_jsx(Text, { fontWeight: "bold", fontSize: "lg", children: "\uD83D\uDCA1 Recomendaciones" }), data.recommendations.map((rec, i) => (_jsxs(HStack, { spacing: 3, children: [_jsx(Badge, { colorScheme: "blue", borderRadius: "full", minW: "20px", textAlign: "center", children: i + 1 }), _jsx(Text, { fontSize: "sm", children: rec })] }, i)))] }) }) }), _jsx(Card, { w: "full", children: _jsx(CardBody, { children: _jsxs(VStack, { spacing: 3, children: [_jsx(Text, { fontWeight: "bold", children: "\u2139\uFE0F Informaci\u00F3n del Reporte" }), _jsxs(Grid, { templateColumns: "repeat(2, 1fr)", gap: 4, w: "full", fontSize: "sm", color: "gray.600", children: [_jsxs(HStack, { children: [_jsx(FaUser, {}), _jsxs(Text, { children: ["Paciente: ", data.patientName] })] }), _jsxs(HStack, { children: [_jsx(FaCalendarAlt, {}), _jsxs(Text, { children: ["\u00DAltima sesi\u00F3n: ", new Date(data.lastSession).toLocaleDateString("es-ES")] })] }), _jsxs(HStack, { children: [_jsx(FaChartLine, {}), _jsxs(Text, { children: ["Per\u00EDodo: ", data.period] })] }), _jsxs(HStack, { children: [_jsx(FaBrain, {}), _jsxs(Text, { children: ["Estado: ", getScoreLabel(data.currentScore)] })] })] })] }) }) })] }));
}
